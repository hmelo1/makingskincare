<%= form_for(@formula) do |f| %>
  <% if @formula.errors.any? %>
     <div id="error_explanation">
      <h2><%= pluralize(@formula.errors.count, "error") %> prohibited this formula from being saved:</h2>
      <ul>
        <% @formula.errors.full_messages.each do |msg| %>
          <li><%= msg %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <h4>Title:</h4>
    <%= f.text_field :title, :size => 50 %>
  </div><br>

  <div class="field">
    <h4>Description:</h4>
    <%= f.text_field :description, :size => 50 %>
  </div><br>

  <div class="field">
    <h4>Category:</h4>
    <%= f.collection_select(:category_id, Category.all, :id , :name, :prompt => true)%>
  </div><br>

  <div class="field">
    <h4>Image (optional):</h4> 
      <% if @formula.image.exists? %>
        <%= image_tag @formula.image.url(:medium, class: "formula_image") %><br>
        <p>Remove Image <%= f.check_box :image_delete %></p>
        <p>Or Choose another image:</p>
      <% end %>
      <%= f.file_field :image %>
    </p>
  </div><br>

  <div class="field">
    <h4>Ingredients:</h4> (Please write amount and ingredient on each line)
    <%= f.fields_for :ingredients do |ingredient_fields| %>
      <p>
        <%= ingredient_fields.text_field :name, :size => 40 %>
        <%= ingredient_fields.check_box :_destroy %> delete
      </p>
    <% end %>
    <%= f.submit 'Add ingredient', :name => "add_ingredient" %>
    <%= f.submit 'Delete checked ingredients', :name => "remove_ingredient" %>
  </div><br>

  <div class="field">
    <h4>Directions:</h4>
    <%= f.text_area :direction, :rows => 6, :cols => 50 %>
  </div><br>

  <div class="field">
    <h4>Skin Concerns: (select all that apply)</h4>
    <%= f.collection_check_boxes :skinconcern_ids, Skinconcern.all, :id, :name %>
    <%= f.fields_for :skinconcerns, @formula.skinconcerns.build do |skinconcerns_feilds| %>
      <%= skinconcerns_feilds.text_field :name %>
    <% end %>
   </div><br>

  <div class="actions">
    <%= f.submit 'Submit', :class => 'btn btn-primary' %>
  </div>
<% end %>



 
